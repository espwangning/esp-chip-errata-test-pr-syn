[SPI-304] flash 自动暂停功能启用时，可能导致读出数据异常
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. only:: esp32h2

   .. tags::
      
      v0.0, v0.1

描述
^^^^

启用 flash 自动暂停功能后，SPI0 总线的读取操作和 SPI1 总线的擦除、写入操作可以并发执行。软件通过 SPI1 擦除或写入 flash、且 cache 通过 SPI0 不定时读取 flash 时，如果先执行擦除或写入操作，预期的请求顺序是 **擦除或写入 > 暂停或等待空闲 > 读取**。

实际先执行擦除或写入操作时，出现的请求顺序是 **擦除或写入 > 读取**，可能导致读出数据异常，程序运行出现问题。

变通方法
^^^^^^^^

禁用自动暂停功能。

解决方案
^^^^^^^^

已在芯片版本 :bdg-success:`v1.2` 中修复。
