[ULP 协处理器] Deep-sleep 模式下如果 RTC_PERIH 电源域上电的话，则无法使用 ULP 协处理器或触摸传感器
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. only:: esp32

   .. tags::

      v0.0, v1.0, v1.1, v3.0, v3.1

描述
^^^^

ULP 协处理器和触摸传感器的主要工作时钟是 FAST_CLK。在 Deep-sleep 模式下，如果 RTC_PERIH 电源域 (RTC Peripherals) 保持供电，则 ULP 协处理器和触摸传感器会比时钟管理模块更早接收到启动信号。这导致它们在工作时钟切换到 FAST_CLK 之前，会先在 SLOW_CLK 时钟下运行一段时间，从而造成工作时钟的不准确。因此，在 Deep-sleep 模式下，如果 RTC_PERIH 保持供电，则 ULP 协处理器和触摸传感器无法使用。

变通方法
^^^^^^^^

如果用户要使用 ULP 协处理器和触摸传感器功能，那么在 Deep-sleep 模式下，RTC_PERIPH 必须保持掉电。请注意，此时 EXT0 唤醒不可用，因为 EXT0 唤醒功能只能在 RTC_PERIPH 上电的情况下工作。

因此，用户需要在使用 EXT0 唤醒功能和 ULP 协处理器/触摸传感器功能之间取舍：

- 如果要用 EXT0 唤醒功能，则 RTC_PERIPH 电源域必须保持供电，此时 ULP 协处理器和触摸传感器功能不可用。
- 如果要用 ULP 协处理器和触摸传感器功能，则 RTC_PERIPH 必须保持掉电，此时 EXT0 唤醒功能不可用。

解决方案
^^^^^^^^

:bdg-warning:`暂无` 修复计划。
